{"version":3,"file":"docs.js","sources":["../../node_modules/svelte/shared.js","../../build/Modal.js","../src/ModalContent.html","../src/Demo.html","../src/docs.js"],"sourcesContent":["function noop() {}\n\nfunction assign(tar, src) {\n\tfor (var k in src) tar[k] = src[k];\n\treturn tar;\n}\n\nfunction assignTrue(tar, src) {\n\tfor (var k in src) tar[k] = 1;\n\treturn tar;\n}\n\nfunction isPromise(value) {\n\treturn value && typeof value.then === 'function';\n}\n\nfunction callAfter(fn, i) {\n\tif (i === 0) fn();\n\treturn () => {\n\t\tif (!--i) fn();\n\t};\n}\n\nfunction addLoc(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nfunction exclude(src, prop) {\n\tconst tar = {};\n\tfor (const k in src) k === prop || (tar[k] = src[k]);\n\treturn tar;\n}\n\nfunction run(fn) {\n\tfn();\n}\n\nfunction append(target, node) {\n\ttarget.appendChild(node);\n}\n\nfunction insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detachBetween(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detachBefore(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detachAfter(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction reinsertBetween(before, after, target) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\ttarget.appendChild(before.parentNode.removeChild(before.nextSibling));\n\t}\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction reinsertAfter(before, target) {\n\twhile (before.nextSibling) target.appendChild(before.nextSibling);\n}\n\nfunction reinsertBefore(after, target) {\n\tvar parent = after.parentNode;\n\twhile (parent.firstChild !== after) target.appendChild(parent.firstChild);\n}\n\nfunction destroyEach(iterations, detach) {\n\tfor (var i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detach);\n\t}\n}\n\nfunction createFragment() {\n\treturn document.createDocumentFragment();\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createSvgElement(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction createComment() {\n\treturn document.createComment('');\n}\n\nfunction addListener(node, event, handler) {\n\tnode.addEventListener(event, handler, false);\n}\n\nfunction removeListener(node, event, handler) {\n\tnode.removeEventListener(event, handler, false);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tnode.setAttribute(attribute, value);\n}\n\nfunction setAttributes(node, attributes) {\n\tfor (var key in attributes) {\n\t\tif (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key in node) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tif (attributes[key] === undefined) removeAttribute(node, key);\n\t\t\telse setAttribute(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\nfunction setCustomElementData(node, prop, value) {\n\tif (prop in node) {\n\t\tnode[prop] = value;\n\t} else if (value) {\n\t\tsetAttribute(node, prop, value);\n\t} else {\n\t\tremoveAttribute(node, prop);\n\t}\n}\n\nfunction removeAttribute(node, attribute) {\n\tnode.removeAttribute(attribute);\n}\n\nfunction setXlinkAttribute(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction getBindingGroupValue(group) {\n\tvar value = [];\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction toNumber(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction timeRangesToArray(ranges) {\n\tvar array = [];\n\tfor (var i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\nfunction children (element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claimElement (nodes, name, attributes, svg) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (var j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tvar attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? createSvgElement(name) : createElement(name);\n}\n\nfunction claimText (nodes, data) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn createText(data);\n}\n\nfunction setData(text, data) {\n\ttext.data = '' + data;\n}\n\nfunction setInputType(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {}\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction selectOption(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nfunction selectOptions(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nfunction selectValue(select) {\n\tvar selectedOption = select.querySelector(':checked') || select.options[0];\n\treturn selectedOption && selectedOption.__value;\n}\n\nfunction selectMultipleValue(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), function(option) {\n\t\treturn option.__value;\n\t});\n}\n\nfunction addResizeListener(element, fn) {\n\tif (getComputedStyle(element).position === 'static') {\n\t\telement.style.position = 'relative';\n\t}\n\n\tconst object = document.createElement('object');\n\tobject.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n\tobject.type = 'text/html';\n\n\tlet win;\n\n\tobject.onload = () => {\n\t\twin = object.contentDocument.defaultView;\n\t\twin.addEventListener('resize', fn);\n\t};\n\n\tif (/Trident/.test(navigator.userAgent)) {\n\t\telement.appendChild(object);\n\t\tobject.data = 'about:blank';\n\t} else {\n\t\tobject.data = 'about:blank';\n\t\telement.appendChild(object);\n\t}\n\n\treturn {\n\t\tcancel: () => {\n\t\t\twin && win.removeEventListener && win.removeEventListener('resize', fn);\n\t\t\telement.removeChild(object);\n\t\t}\n\t};\n}\n\nfunction toggleClass(element, name, toggle) {\n\telement.classList.toggle(name, !!toggle);\n}\n\nfunction linear(t) {\n\treturn t;\n}\n\nfunction generateRule({ a, b, delta, duration }, ease, fn) {\n\tconst step = 16.666 / duration;\n\tlet keyframes = '{\\n';\n\n\tfor (let p = 0; p <= 1; p += step) {\n\t\tconst t = a + delta * ease(p);\n\t\tkeyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n\t}\n\n\treturn keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction wrapTransition(component, node, fn, params, intro) {\n\tlet obj = fn.call(component, node, params);\n\tlet duration;\n\tlet ease;\n\tlet cssText;\n\n\tlet initialised = false;\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\n\t\trun(b, callback) {\n\t\t\tif (typeof obj === 'function') {\n\t\t\t\ttransitionManager.wait().then(() => {\n\t\t\t\t\tobj = obj();\n\t\t\t\t\tthis._run(b, callback);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis._run(b, callback);\n\t\t\t}\n\t\t},\n\n\t\t_run(b, callback) {\n\t\t\tduration = obj.duration || 300;\n\t\t\tease = obj.easing || linear;\n\n\t\t\tconst program = {\n\t\t\t\tstart: window.performance.now() + (obj.delay || 0),\n\t\t\t\tb,\n\t\t\t\tcallback: callback || noop\n\t\t\t};\n\n\t\t\tif (intro && !initialised) {\n\t\t\t\tif (obj.css && obj.delay) {\n\t\t\t\t\tcssText = node.style.cssText;\n\t\t\t\t\tnode.style.cssText += obj.css(0, 1);\n\t\t\t\t}\n\n\t\t\t\tif (obj.tick) obj.tick(0, 1);\n\t\t\t\tinitialised = true;\n\t\t\t}\n\n\t\t\tif (!b) {\n\t\t\t\tprogram.group = outros.current;\n\t\t\t\toutros.current.remaining += 1;\n\t\t\t}\n\n\t\t\tif (obj.delay) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start(program);\n\t\t\t}\n\n\t\t\tif (!this.running) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add(this);\n\t\t\t}\n\t\t},\n\n\t\tstart(program) {\n\t\t\tcomponent.fire(`${program.b ? 'intro' : 'outro'}.start`, { node });\n\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs(program.b - program.a);\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif (obj.css) {\n\t\t\t\tif (obj.delay) node.style.cssText = cssText;\n\n\t\t\t\tconst rule = generateRule(program, ease, obj.css);\n\t\t\t\ttransitionManager.addRule(rule, program.name = '__svelte_' + hash(rule));\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(anim => anim && (program.delta < 0 || !/__svelte/.test(anim)))\n\t\t\t\t\t.concat(`${program.name} ${program.duration}ms linear 1 forwards`)\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\n\t\tupdate(now) {\n\t\t\tconst program = this.program;\n\t\t\tif (!program) return;\n\n\t\t\tconst p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (obj.tick) obj.tick(this.t, 1 - this.t);\n\t\t},\n\n\t\tdone() {\n\t\t\tconst program = this.program;\n\t\t\tthis.t = program.b;\n\n\t\t\tif (obj.tick) obj.tick(this.t, 1 - this.t);\n\n\t\t\tcomponent.fire(`${program.b ? 'intro' : 'outro'}.end`, { node });\n\n\t\t\tif (!program.b && !program.invalidated) {\n\t\t\t\tprogram.group.callbacks.push(() => {\n\t\t\t\t\tprogram.callback();\n\t\t\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\t\t});\n\n\t\t\t\tif (--program.group.remaining === 0) {\n\t\t\t\t\tprogram.group.callbacks.forEach(run);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\t}\n\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\n\t\tabort(reset) {\n\t\t\tif (this.program) {\n\t\t\t\tif (reset && obj.tick) obj.tick(1, 0);\n\t\t\t\tif (obj.css) transitionManager.deleteRule(node, this.program.name);\n\t\t\t\tthis.program = this.pending = null;\n\t\t\t\tthis.running = false;\n\t\t\t}\n\t\t},\n\n\t\tinvalidate() {\n\t\t\tif (this.program) {\n\t\t\t\tthis.program.invalidated = true;\n\t\t\t}\n\t\t}\n\t};\n}\n\nlet outros = {};\n\nfunction groupOutros() {\n\toutros.current = {\n\t\tremaining: 0,\n\t\tcallbacks: []\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\tbound: null,\n\tstylesheet: null,\n\tactiveRules: {},\n\tpromise: null,\n\n\tadd(transition) {\n\t\tthis.transitions.push(transition);\n\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\trequestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));\n\t\t}\n\t},\n\n\taddRule(rule, name) {\n\t\tif (!this.stylesheet) {\n\t\t\tconst style = createElement('style');\n\t\t\tdocument.head.appendChild(style);\n\t\t\ttransitionManager.stylesheet = style.sheet;\n\t\t}\n\n\t\tif (!this.activeRules[name]) {\n\t\t\tthis.activeRules[name] = true;\n\t\t\tthis.stylesheet.insertRule(`@keyframes ${name} ${rule}`, this.stylesheet.cssRules.length);\n\t\t}\n\t},\n\n\tnext() {\n\t\tthis.running = false;\n\n\t\tconst now = window.performance.now();\n\t\tlet i = this.transitions.length;\n\n\t\twhile (i--) {\n\t\t\tconst transition = this.transitions[i];\n\n\t\t\tif (transition.program && now >= transition.program.end) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif (transition.pending && now >= transition.pending.start) {\n\t\t\t\ttransition.start(transition.pending);\n\t\t\t}\n\n\t\t\tif (transition.running) {\n\t\t\t\ttransition.update(now);\n\t\t\t\tthis.running = true;\n\t\t\t} else if (!transition.pending) {\n\t\t\t\tthis.transitions.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.running) {\n\t\t\trequestAnimationFrame(this.bound);\n\t\t} else if (this.stylesheet) {\n\t\t\tlet i = this.stylesheet.cssRules.length;\n\t\t\twhile (i--) this.stylesheet.deleteRule(i);\n\t\t\tthis.activeRules = {};\n\t\t}\n\t},\n\n\tdeleteRule(node, name) {\n\t\tnode.style.animation = node.style.animation\n\t\t\t.split(', ')\n\t\t\t.filter(anim => anim && anim.indexOf(name) === -1)\n\t\t\t.join(', ');\n\t},\n\n\twait() {\n\t\tif (!transitionManager.promise) {\n\t\t\ttransitionManager.promise = Promise.resolve();\n\t\t\ttransitionManager.promise.then(() => {\n\t\t\t\ttransitionManager.promise = null;\n\t\t\t});\n\t\t}\n\n\t\treturn transitionManager.promise;\n\t}\n};\n\nfunction wrapAnimation(node, from, fn, params) {\n\tif (!from) return;\n\n\tconst to = node.getBoundingClientRect();\n\tif (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom) return;\n\n\tconst info = fn(node, { from, to }, params);\n\n\tconst duration = 'duration' in info ? info.duration : 300;\n\tconst delay = 'delay' in info ? info.delay : 0;\n\tconst ease = info.easing || linear;\n\tconst start = window.performance.now() + delay;\n\tconst end = start + duration;\n\n\tconst program = {\n\t\ta: 0,\n\t\tt: 0,\n\t\tb: 1,\n\t\tdelta: 1,\n\t\tduration,\n\t\tstart,\n\t\tend\n\t};\n\n\tconst cssText = node.style.cssText;\n\n\tconst animation = {\n\t\tpending: delay ? program : null,\n\t\tprogram: delay ? null : program,\n\t\trunning: true,\n\n\t\tstart() {\n\t\t\tif (info.css) {\n\t\t\t\tif (delay) node.style.cssText = cssText;\n\n\t\t\t\tconst rule = generateRule(program, ease, info.css);\n\t\t\t\tprogram.name = `__svelte_${hash(rule)}`;\n\n\t\t\t\ttransitionManager.addRule(rule, program.name);\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(anim => anim && (program.delta < 0 || !/__svelte/.test(anim)))\n\t\t\t\t\t.concat(`${program.name} ${program.duration}ms linear 1 forwards`)\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tanimation.program = program;\n\t\t\tanimation.pending = null;\n\t\t},\n\n\t\tupdate: now => {\n\t\t\tconst p = now - program.start;\n\t\t\tconst t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (info.tick) info.tick(t, 1 - t);\n\t\t},\n\n\t\tdone() {\n\t\t\tif (info.tick) info.tick(1, 0);\n\t\t\tanimation.stop();\n\t\t},\n\n\t\tstop() {\n\t\t\tif (info.css) transitionManager.deleteRule(node, program.name);\n\t\t\tanimation.running = false;\n\t\t}\n\t};\n\n\ttransitionManager.add(animation);\n\n\tif (info.tick) info.tick(0, 1);\n\n\tif (delay) {\n\t\tif (info.css) node.style.cssText += info.css(0, 1);\n\t} else {\n\t\tanimation.start();\n\t}\n\n\treturn animation;\n}\n\nfunction fixPosition(node) {\n\tconst style = getComputedStyle(node);\n\n\tif (style.position !== 'absolute' && style.position !== 'fixed') {\n\t\tconst { width, height } = style;\n\t\tconst a = node.getBoundingClientRect();\n\t\tnode.style.position = 'absolute';\n\t\tnode.style.width = width;\n\t\tnode.style.height = height;\n\t\tconst b = node.getBoundingClientRect();\n\n\t\tif (a.left !== b.left || a.top !== b.top) {\n\t\t\tconst style = getComputedStyle(node);\n\t\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\n\t\t\tnode.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n\t\t}\n\t}\n}\n\nfunction handlePromise(promise, info) {\n\tvar token = info.token = {};\n\n\tfunction update(type, index, key, value) {\n\t\tif (info.token !== token) return;\n\n\t\tinfo.resolved = key && { [key]: value };\n\n\t\tconst child_ctx = assign(assign({}, info.ctx), info.resolved);\n\t\tconst block = type && (info.current = type)(info.component, child_ctx);\n\n\t\tif (info.block) {\n\t\t\tif (info.blocks) {\n\t\t\t\tinfo.blocks.forEach((block, i) => {\n\t\t\t\t\tif (i !== index && block) {\n\t\t\t\t\t\tgroupOutros();\n\t\t\t\t\t\tblock.o(() => {\n\t\t\t\t\t\t\tblock.d(1);\n\t\t\t\t\t\t\tinfo.blocks[i] = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tinfo.block.d(1);\n\t\t\t}\n\n\t\t\tblock.c();\n\t\t\tblock[block.i ? 'i' : 'm'](info.mount(), info.anchor);\n\n\t\t\tinfo.component.root.set({}); // flush any handlers that were created\n\t\t}\n\n\t\tinfo.block = block;\n\t\tif (info.blocks) info.blocks[index] = block;\n\t}\n\n\tif (isPromise(promise)) {\n\t\tpromise.then(value => {\n\t\t\tupdate(info.then, 1, info.value, value);\n\t\t}, error => {\n\t\t\tupdate(info.catch, 2, info.error, error);\n\t\t});\n\n\t\t// if we previously had a then/catch block, destroy it\n\t\tif (info.current !== info.pending) {\n\t\t\tupdate(info.pending, 0);\n\t\t\treturn true;\n\t\t}\n\t} else {\n\t\tif (info.current !== info.then) {\n\t\t\tupdate(info.then, 1, info.value, promise);\n\t\t\treturn true;\n\t\t}\n\n\t\tinfo.resolved = { [info.value]: promise };\n\t}\n}\n\nfunction destroyBlock(block, lookup) {\n\tblock.d(1);\n\tlookup[block.key] = null;\n}\n\nfunction outroAndDestroyBlock(block, lookup) {\n\tblock.o(function() {\n\t\tdestroyBlock(block, lookup);\n\t});\n}\n\nfunction fixAndOutroAndDestroyBlock(block, lookup) {\n\tblock.f();\n\toutroAndDestroyBlock(block, lookup);\n}\n\nfunction updateKeyedEach(old_blocks, component, changed, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, intro_method, next, get_context) {\n\tvar o = old_blocks.length;\n\tvar n = list.length;\n\n\tvar i = o;\n\tvar old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\n\tvar new_blocks = [];\n\tvar new_lookup = {};\n\tvar deltas = {};\n\n\tvar i = n;\n\twhile (i--) {\n\t\tvar child_ctx = get_context(ctx, list, i);\n\t\tvar key = get_key(child_ctx);\n\t\tvar block = lookup[key];\n\n\t\tif (!block) {\n\t\t\tblock = create_each_block(component, key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\tblock.p(changed, child_ctx);\n\t\t}\n\n\t\tnew_blocks[i] = new_lookup[key] = block;\n\n\t\tif (key in old_indexes) deltas[key] = Math.abs(i - old_indexes[key]);\n\t}\n\n\tvar will_move = {};\n\tvar did_move = {};\n\n\tfunction insert(block) {\n\t\tblock[intro_method](node, next);\n\t\tlookup[block.key] = block;\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\n\twhile (o && n) {\n\t\tvar new_block = new_blocks[n - 1];\n\t\tvar old_block = old_blocks[o - 1];\n\t\tvar new_key = new_block.key;\n\t\tvar old_key = old_block.key;\n\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t}\n\n\t\telse if (!new_lookup[old_key]) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t}\n\n\t\telse if (!lookup[new_key] || will_move[new_key]) {\n\t\t\tinsert(new_block);\n\t\t}\n\n\t\telse if (did_move[old_key]) {\n\t\t\to--;\n\n\t\t} else if (deltas[new_key] > deltas[old_key]) {\n\t\t\tdid_move[new_key] = true;\n\t\t\tinsert(new_block);\n\n\t\t} else {\n\t\t\twill_move[old_key] = true;\n\t\t\to--;\n\t\t}\n\t}\n\n\twhile (o--) {\n\t\tvar old_block = old_blocks[o];\n\t\tif (!new_lookup[old_block.key]) destroy(old_block, lookup);\n\t}\n\n\twhile (n) insert(new_blocks[n - 1]);\n\n\treturn new_blocks;\n}\n\nfunction measure(blocks) {\n\tconst rects = {};\n\tlet i = blocks.length;\n\twhile (i--) rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();\n\treturn rects;\n}\n\nfunction animate(blocks, rects, fn, params) {\n\tlet i = blocks.length;\n\twhile (i--) {\n\t\tconst block = blocks[i];\n\t\tconst from = rects[block.key];\n\n\t\tif (!from) continue;\n\t\tconst to = block.node.getBoundingClientRect();\n\n\t\tif (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom) continue;\n\n\n\t}\n}\n\nfunction getSpreadUpdate(levels, updates) {\n\tvar update = {};\n\n\tvar to_null_out = {};\n\tvar accounted_for = {};\n\n\tvar i = levels.length;\n\twhile (i--) {\n\t\tvar o = levels[i];\n\t\tvar n = updates[i];\n\n\t\tif (n) {\n\t\t\tfor (var key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\n\t\t\tfor (var key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (var key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (var key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\n\treturn update;\n}\n\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nconst invalidAttributeNameCharacter = /[\\s'\">\\/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n\nfunction spread(args) {\n\tconst attributes = Object.assign({}, ...args);\n\tlet str = '';\n\n\tObject.keys(attributes).forEach(name => {\n\t\tif (invalidAttributeNameCharacter.test(name)) return;\n\n\t\tconst value = attributes[name];\n\t\tif (value === undefined) return;\n\t\tif (value === true) str += \" \" + name;\n\n\t\tconst escaped = String(value)\n\t\t\t.replace(/\"/g, '&#34;')\n\t\t\t.replace(/'/g, '&#39;');\n\n\t\tstr += \" \" + name + \"=\" + JSON.stringify(escaped);\n\t});\n\n\treturn str;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t\"'\": '&#39;',\n\t'&': '&amp;',\n\t'<': '&lt;',\n\t'>': '&gt;'\n};\n\nfunction escape(html) {\n\treturn String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\n\nfunction each(items, assign, fn) {\n\tlet str = '';\n\tfor (let i = 0; i < items.length; i += 1) {\n\t\tstr += fn(assign(items[i], i));\n\t}\n\treturn str;\n}\n\nconst missingComponent = {\n\t_render: () => ''\n};\n\nfunction validateSsrComponent(component, name) {\n\tif (!component || !component._render) {\n\t\tif (name === 'svelte:component') name += 'this={...}';\n\t\tthrow new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n\t}\n\n\treturn component;\n}\n\nfunction debug(file, line, column, values) {\n\tconsole.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`);\n\tconsole.log(values);\n\treturn '';\n}\n\nfunction blankObject() {\n\treturn Object.create(null);\n}\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = noop;\n\n\tthis._fragment.d(detach !== false);\n\tthis._fragment = null;\n\tthis._state = {};\n}\n\nfunction destroyDev(detach) {\n\tdestroy.call(this, detach);\n\tthis.destroy = function() {\n\t\tconsole.warn('Component was already destroyed');\n\t};\n}\n\nfunction _differs(a, b) {\n\treturn a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction _differsImmutable(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\tvar handler = handlers[i];\n\n\t\tif (!handler.__calling) {\n\t\t\ttry {\n\t\t\t\thandler.__calling = true;\n\t\t\t\thandler.call(this, data);\n\t\t\t} finally {\n\t\t\t\thandler.__calling = false;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction flush(component) {\n\tcomponent._lock = true;\n\tcallAll(component._beforecreate);\n\tcallAll(component._oncreate);\n\tcallAll(component._aftercreate);\n\tcomponent._lock = false;\n}\n\nfunction get() {\n\treturn this._state;\n}\n\nfunction init(component, options) {\n\tcomponent._handlers = blankObject();\n\tcomponent._slots = blankObject();\n\tcomponent._bind = options._bind;\n\tcomponent._staged = {};\n\n\tcomponent.options = options;\n\tcomponent.root = options.root || component;\n\tcomponent.store = options.store || component.root.store;\n\n\tif (!options.root) {\n\t\tcomponent._beforecreate = [];\n\t\tcomponent._oncreate = [];\n\t\tcomponent._aftercreate = [];\n\t}\n}\n\nfunction on(eventName, handler) {\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this.root._lock) return;\n\tflush(this.root);\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tnewState = assign(this._staged, newState);\n\tthis._staged = {};\n\n\tfor (var key in newState) {\n\t\tif (this._differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign(assign({}, oldState), newState);\n\tthis._recompute(changed, this._state);\n\tif (this._bind) this._bind(changed, this._state);\n\n\tif (this._fragment) {\n\t\tthis.fire(\"state\", { changed: changed, current: this._state, previous: oldState });\n\t\tthis._fragment.p(changed, this._state);\n\t\tthis.fire(\"update\", { changed: changed, current: this._state, previous: oldState });\n\t}\n}\n\nfunction _stage(newState) {\n\tassign(this._staged, newState);\n}\n\nfunction setDev(newState) {\n\tif (typeof newState !== 'object') {\n\t\tthrow new Error(\n\t\t\tthis._debugName + '.set was called without an object of data key-values to update.'\n\t\t);\n\t}\n\n\tthis._checkReadOnly(newState);\n\tset.call(this, newState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.shift()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment[this._fragment.i ? 'i' : 'm'](target, anchor || null);\n}\n\nvar PENDING = {};\nvar SUCCESS = {};\nvar FAILURE = {};\n\nfunction removeFromStore() {\n\tthis.store._remove(this);\n}\n\nvar proto = {\n\tdestroy,\n\tget,\n\tfire,\n\ton,\n\tset,\n\t_recompute: noop,\n\t_set,\n\t_stage,\n\t_mount,\n\t_differs\n};\n\nvar protoDev = {\n\tdestroy: destroyDev,\n\tget,\n\tfire,\n\ton,\n\tset: setDev,\n\t_recompute: noop,\n\t_set,\n\t_stage,\n\t_mount,\n\t_differs\n};\n\nexport { blankObject, destroy, destroyDev, _differs, _differsImmutable, fire, flush, get, init, on, set, _set, _stage, setDev, callAll, _mount, PENDING, SUCCESS, FAILURE, removeFromStore, proto, protoDev, wrapAnimation, fixPosition, handlePromise, append, insert, detachNode, detachBetween, detachBefore, detachAfter, reinsertBetween, reinsertChildren, reinsertAfter, reinsertBefore, destroyEach, createFragment, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setAttributes, setCustomElementData, removeAttribute, setXlinkAttribute, getBindingGroupValue, toNumber, timeRangesToArray, children, claimElement, claimText, setData, setInputType, setStyle, selectOption, selectOptions, selectValue, selectMultipleValue, addResizeListener, toggleClass, destroyBlock, outroAndDestroyBlock, fixAndOutroAndDestroyBlock, updateKeyedEach, measure, animate, getSpreadUpdate, invalidAttributeNameCharacter, spread, escaped, escape, each, missingComponent, validateSsrComponent, debug, linear, generateRule, hash, wrapTransition, outros, groupOutros, transitionManager, noop, assign, assignTrue, isPromise, callAfter, addLoc, exclude, run };\n","function noop() {}\n\nfunction assign(tar, src) {\n\tfor (var k in src) tar[k] = src[k];\n\treturn tar;\n}\n\nfunction assignTrue(tar, src) {\n\tfor (var k in src) tar[k] = 1;\n\treturn tar;\n}\n\nfunction append(target, node) {\n\ttarget.appendChild(node);\n}\n\nfunction insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction addListener(node, event, handler) {\n\tnode.addEventListener(event, handler, false);\n}\n\nfunction removeListener(node, event, handler) {\n\tnode.removeEventListener(event, handler, false);\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction blankObject() {\n\treturn Object.create(null);\n}\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = noop;\n\n\tthis._fragment.d(detach !== false);\n\tthis._fragment = null;\n\tthis._state = {};\n}\n\nfunction _differs(a, b) {\n\treturn a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\tvar handler = handlers[i];\n\n\t\tif (!handler.__calling) {\n\t\t\ttry {\n\t\t\t\thandler.__calling = true;\n\t\t\t\thandler.call(this, data);\n\t\t\t} finally {\n\t\t\t\thandler.__calling = false;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction flush(component) {\n\tcomponent._lock = true;\n\tcallAll(component._beforecreate);\n\tcallAll(component._oncreate);\n\tcallAll(component._aftercreate);\n\tcomponent._lock = false;\n}\n\nfunction get() {\n\treturn this._state;\n}\n\nfunction init(component, options) {\n\tcomponent._handlers = blankObject();\n\tcomponent._slots = blankObject();\n\tcomponent._bind = options._bind;\n\tcomponent._staged = {};\n\n\tcomponent.options = options;\n\tcomponent.root = options.root || component;\n\tcomponent.store = options.store || component.root.store;\n\n\tif (!options.root) {\n\t\tcomponent._beforecreate = [];\n\t\tcomponent._oncreate = [];\n\t\tcomponent._aftercreate = [];\n\t}\n}\n\nfunction on(eventName, handler) {\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this.root._lock) return;\n\tflush(this.root);\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tnewState = assign(this._staged, newState);\n\tthis._staged = {};\n\n\tfor (var key in newState) {\n\t\tif (this._differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign(assign({}, oldState), newState);\n\tthis._recompute(changed, this._state);\n\tif (this._bind) this._bind(changed, this._state);\n\n\tif (this._fragment) {\n\t\tthis.fire(\"state\", { changed: changed, current: this._state, previous: oldState });\n\t\tthis._fragment.p(changed, this._state);\n\t\tthis.fire(\"update\", { changed: changed, current: this._state, previous: oldState });\n\t}\n}\n\nfunction _stage(newState) {\n\tassign(this._staged, newState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.shift()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment[this._fragment.i ? 'i' : 'm'](target, anchor || null);\n}\n\nvar proto = {\n\tdestroy,\n\tget,\n\tfire,\n\ton,\n\tset,\n\t_recompute: noop,\n\t_set,\n\t_stage,\n\t_mount,\n\t_differs\n};\n\nfunction isDate(obj) {\n    return Object.prototype.toString.call(obj) === '[object Date]';\n}\n\nvar scheduler$1 = {\n    components: [],\n    running: false,\n    add: function (component) {\n        if (~scheduler$1.components.indexOf(component))\n            return;\n        scheduler$1.components.push(component);\n        if (!scheduler$1.running) {\n            scheduler$1.running = true;\n            requestAnimationFrame(scheduler$1.next);\n        }\n    },\n    next: function () {\n        var hasComponents = false;\n        var i = scheduler$1.components.length;\n        while (i--) {\n            var component = scheduler$1.components[i];\n            var data = {};\n            var hasSprings = false;\n            for (var key in component._springs) {\n                var spring_1 = component._springs[key];\n                if (spring_1.tick(data)) {\n                    hasSprings = true;\n                    hasComponents = true;\n                }\n                else {\n                    component._springCallbacks[key]();\n                    delete component._springs[key];\n                    delete component._springCallbacks[key];\n                }\n            }\n            component._springing = true;\n            component.set(data);\n            component._springing = false;\n            if (!hasSprings)\n                scheduler$1.components.splice(i, 1);\n        }\n        if (hasComponents) {\n            requestAnimationFrame(scheduler$1.next);\n        }\n        else {\n            scheduler$1.running = false;\n        }\n    }\n};\nfunction snap$1(key, a, b, options) {\n    return {\n        key: key,\n        tick: function (object) {\n            object[key] = b;\n            return false;\n        },\n        update: function (object, options) {\n            b = object;\n        }\n    };\n}\nfunction number(key, a, b, options) {\n    var velocity = 0;\n    var stiffness = options.stiffness, damping = options.damping;\n    var valueThreshold = Math.abs(b - a) * 0.001;\n    var velocityThreshold = valueThreshold; // TODO is this right?\n    return {\n        key: key,\n        tick: function (object) {\n            var d = b - a;\n            var spring = stiffness * d;\n            var damper = damping * velocity;\n            var acceleration = spring - damper;\n            velocity += acceleration;\n            a += velocity;\n            object[key] = a;\n            if (velocity < velocityThreshold && Math.abs(b - a) < valueThreshold) {\n                object[key] = b;\n                return false;\n            }\n            object[key] = a;\n            return true;\n        },\n        update: function (object, options) {\n            checkCompatibility(object, b);\n            b = object;\n            stiffness = options.stiffness;\n            damping = options.damping;\n        }\n    };\n}\nfunction date(key, a, b, options) {\n    var dummy = {};\n    var subspring = number(key, a.getTime(), b.getTime(), options);\n    return {\n        key: key,\n        tick: function (object) {\n            if (!subspring.tick(dummy)) {\n                object[key] = b;\n                return false;\n            }\n            object[key] = new Date(dummy[key]);\n            return true;\n        },\n        update: function (object, options) {\n            checkCompatibility(object, b);\n            subspring.update(object.getTime(), options);\n            b = object;\n        }\n    };\n}\nfunction array(key, a, b, options) {\n    var value = [];\n    var subsprings = [];\n    for (var i = 0; i < a.length; i += 1) {\n        subsprings.push(getSpring(i, a[i], b[i], options));\n    }\n    return {\n        key: key,\n        tick: function (object) {\n            var active = false;\n            for (var i = 0; i < subsprings.length; i += 1) {\n                if (subsprings[i].tick(value))\n                    active = true;\n            }\n            if (!active) {\n                object[key] = b;\n                return false;\n            }\n            object[key] = value;\n            return true;\n        },\n        update: function (object, options) {\n            checkCompatibility(object, b);\n            for (var i = 0; i < object.length; i += 1) {\n                subsprings[i].update(object[i], options);\n            }\n            b = object;\n        }\n    };\n}\nfunction object(key, a, b, options) {\n    var value = {};\n    var subsprings = [];\n    for (var k in a) {\n        subsprings.push(getSpring(k, a[k], b[k], options));\n    }\n    return {\n        key: key,\n        tick: function (object) {\n            var active = false;\n            for (var i = 0; i < subsprings.length; i += 1) {\n                if (subsprings[i].tick(value))\n                    active = true;\n            }\n            if (!active) {\n                object[key] = b;\n                return false;\n            }\n            object[key] = value;\n            return true;\n        },\n        update: function (object, options) {\n            checkCompatibility(object, b);\n            for (var i = 0; i < subsprings.length; i += 1) {\n                subsprings[i].update(object[subsprings[i].key], options);\n            }\n            b = object;\n        }\n    };\n}\nfunction checkCompatibility(a, b) {\n    var type = typeof a;\n    if (type !== typeof b ||\n        Array.isArray(a) !== Array.isArray(b) ||\n        isDate(a) !== isDate(b)) {\n        throw new Error('Cannot interpolate values of different type');\n    }\n    if (type === 'object') {\n        if (!a || !b)\n            throw new Error('Object cannot be null');\n        if (Array.isArray(a)) {\n            if (a.length !== b.length) {\n                throw new Error('Cannot interpolate arrays of different length');\n            }\n        }\n        else {\n            if (!keysMatch(a, b))\n                throw new Error('Cannot interpolate differently-shaped objects');\n        }\n    }\n    else if (type !== 'number') {\n        throw new Error(\"Cannot interpolate \" + type + \" values\");\n    }\n}\nfunction getSpring(key, a, b, options) {\n    if (a === b || a !== a)\n        return snap$1(key, a, b, options);\n    checkCompatibility(a, b);\n    if (typeof a === 'object') {\n        if (Array.isArray(a)) {\n            return array(key, a, b, options);\n        }\n        if (isDate(a)) {\n            return date(key, a, b, options);\n        }\n        return object(key, a, b, options);\n    }\n    return number(key, a, b, options);\n}\nfunction spring(key, to, options) {\n    var _this = this;\n    if (!this._springs) {\n        this._springs = Object.create(null);\n        this._springCallbacks = Object.create(null);\n        this._springing = false;\n        var set_1 = this.set;\n        this.set = function (data) {\n            if (!_this._springing) {\n                for (var key_1 in data) {\n                    delete _this._springs[key_1];\n                }\n            }\n            set_1.call(_this, data);\n        };\n    }\n    if (this._springs[key]) {\n        this._springs[key].update(to, options);\n    }\n    else {\n        var spring_2 = getSpring(key, this.get()[key], to, options);\n        this._springs[key] = spring_2;\n    }\n    var promise = new Promise(function (fulfil) {\n        _this._springCallbacks[key] = fulfil;\n    });\n    scheduler$1.add(this);\n    return promise;\n}\nfunction keysMatch(a, b) {\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length)\n        return false;\n    for (var i = 0; i < aKeys.length; i += 1) {\n        if (!(aKeys[i] in b))\n            return false;\n    }\n    return true;\n}\n\nvar tabbable = function(el, options) {\n  options = options || {};\n\n  var elementDocument = el.ownerDocument || el;\n  var basicTabbables = [];\n  var orderedTabbables = [];\n\n  // A node is \"available\" if\n  // - it's computed style\n  var isUnavailable = createIsUnavailable(elementDocument);\n\n  var candidateSelectors = [\n    'input',\n    'select',\n    'a[href]',\n    'textarea',\n    'button',\n    '[tabindex]',\n  ];\n\n  var candidates = el.querySelectorAll(candidateSelectors.join(','));\n\n  if (options.includeContainer) {\n    var matches = Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\n    if (\n      candidateSelectors.some(function(candidateSelector) {\n        return matches.call(el, candidateSelector);\n      })\n    ) {\n      candidates = Array.prototype.slice.apply(candidates);\n      candidates.unshift(el);\n    }\n  }\n\n  var candidate, candidateIndexAttr, candidateIndex;\n  for (var i = 0, l = candidates.length; i < l; i++) {\n    candidate = candidates[i];\n    candidateIndexAttr = parseInt(candidate.getAttribute('tabindex'), 10);\n    candidateIndex = isNaN(candidateIndexAttr) ? candidate.tabIndex : candidateIndexAttr;\n\n    if (\n      candidateIndex < 0\n      || (candidate.tagName === 'INPUT' && candidate.type === 'hidden')\n      || candidate.disabled\n      || isUnavailable(candidate, elementDocument)\n    ) {\n      continue;\n    }\n\n    if (candidateIndex === 0) {\n      basicTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        index: i,\n        tabIndex: candidateIndex,\n        node: candidate,\n      });\n    }\n  }\n\n  var tabbableNodes = orderedTabbables\n    .sort(function(a, b) {\n      return a.tabIndex === b.tabIndex ? a.index - b.index : a.tabIndex - b.tabIndex;\n    })\n    .map(function(a) {\n      return a.node\n    });\n\n  Array.prototype.push.apply(tabbableNodes, basicTabbables);\n\n  return tabbableNodes;\n};\n\nfunction createIsUnavailable(elementDocument) {\n  // Node cache must be refreshed on every check, in case\n  // the content of the element has changed\n  var isOffCache = [];\n\n  // \"off\" means `display: none;`, as opposed to \"hidden\",\n  // which means `visibility: hidden;`. getComputedStyle\n  // accurately reflects visiblity in context but not\n  // \"off\" state, so we need to recursively check parents.\n\n  function isOff(node, nodeComputedStyle) {\n    if (node === elementDocument.documentElement) return false;\n\n    // Find the cached node (Array.prototype.find not available in IE9)\n    for (var i = 0, length = isOffCache.length; i < length; i++) {\n      if (isOffCache[i][0] === node) return isOffCache[i][1];\n    }\n\n    nodeComputedStyle = nodeComputedStyle || elementDocument.defaultView.getComputedStyle(node);\n\n    var result = false;\n\n    if (nodeComputedStyle.display === 'none') {\n      result = true;\n    } else if (node.parentNode) {\n      result = isOff(node.parentNode);\n    }\n\n    isOffCache.push([node, result]);\n\n    return result;\n  }\n\n  return function isUnavailable(node) {\n    if (node === elementDocument.documentElement) return false;\n\n    var computedStyle = elementDocument.defaultView.getComputedStyle(node);\n\n    if (isOff(node, computedStyle)) return true;\n\n    return computedStyle.visibility === 'hidden';\n  }\n}\n\nvar listeningFocusTrap = null;\n\nfunction focusTrap(element, userOptions) {\n  var tabbableNodes = [];\n  var firstTabbableNode = null;\n  var lastTabbableNode = null;\n  var nodeFocusedBeforeActivation = null;\n  var active = false;\n  var paused = false;\n  var tabEvent = null;\n\n  var container = (typeof element === 'string')\n    ? document.querySelector(element)\n    : element;\n\n  var config = userOptions || {};\n  config.returnFocusOnDeactivate = (userOptions && userOptions.returnFocusOnDeactivate !== undefined)\n    ? userOptions.returnFocusOnDeactivate\n    : true;\n  config.escapeDeactivates = (userOptions && userOptions.escapeDeactivates !== undefined)\n    ? userOptions.escapeDeactivates\n    : true;\n\n  var trap = {\n    activate: activate,\n    deactivate: deactivate,\n    pause: pause,\n    unpause: unpause,\n  };\n\n  return trap;\n\n  function activate(activateOptions) {\n    if (active) return;\n\n    var defaultedActivateOptions = {\n      onActivate: (activateOptions && activateOptions.onActivate !== undefined)\n        ? activateOptions.onActivate\n        : config.onActivate,\n    };\n\n    active = true;\n    paused = false;\n    nodeFocusedBeforeActivation = document.activeElement;\n\n    if (defaultedActivateOptions.onActivate) {\n      defaultedActivateOptions.onActivate();\n    }\n\n    addListeners();\n    return trap;\n  }\n\n  function deactivate(deactivateOptions) {\n    if (!active) return;\n\n    var defaultedDeactivateOptions = {\n      returnFocus: (deactivateOptions && deactivateOptions.returnFocus !== undefined)\n        ? deactivateOptions.returnFocus\n        : config.returnFocusOnDeactivate,\n      onDeactivate: (deactivateOptions && deactivateOptions.onDeactivate !== undefined)\n        ? deactivateOptions.onDeactivate\n        : config.onDeactivate,\n    };\n\n    removeListeners();\n\n    if (defaultedDeactivateOptions.onDeactivate) {\n      defaultedDeactivateOptions.onDeactivate();\n    }\n\n    if (defaultedDeactivateOptions.returnFocus) {\n      setTimeout(function () {\n        tryFocus(nodeFocusedBeforeActivation);\n      }, 0);\n    }\n\n    active = false;\n    paused = false;\n    return this;\n  }\n\n  function pause() {\n    if (paused || !active) return;\n    paused = true;\n    removeListeners();\n  }\n\n  function unpause() {\n    if (!paused || !active) return;\n    paused = false;\n    addListeners();\n  }\n\n  function addListeners() {\n    if (!active) return;\n\n    // There can be only one listening focus trap at a time\n    if (listeningFocusTrap) {\n      listeningFocusTrap.pause();\n    }\n    listeningFocusTrap = trap;\n\n    updateTabbableNodes();\n    // Ensure that the focused element doesn't capture the event that caused the focus trap activation\n    setTimeout(function () {\n      tryFocus(firstFocusNode());\n    }, 0);\n    document.addEventListener('focus', checkFocus, true);\n    document.addEventListener('click', checkClick, true);\n    document.addEventListener('mousedown', checkPointerDown, true);\n    document.addEventListener('touchstart', checkPointerDown, true);\n    document.addEventListener('keydown', checkKey, true);\n\n    return trap;\n  }\n\n  function removeListeners() {\n    if (!active || listeningFocusTrap !== trap) return;\n\n    document.removeEventListener('focus', checkFocus, true);\n    document.removeEventListener('click', checkClick, true);\n    document.removeEventListener('mousedown', checkPointerDown, true);\n    document.removeEventListener('touchstart', checkPointerDown, true);\n    document.removeEventListener('keydown', checkKey, true);\n\n    listeningFocusTrap = null;\n\n    return trap;\n  }\n\n  function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n    var node = optionValue;\n    if (!optionValue) {\n      return null;\n    }\n    if (typeof optionValue === 'string') {\n      node = document.querySelector(optionValue);\n      if (!node) {\n        throw new Error('`' + optionName + '` refers to no known node');\n      }\n    }\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n      if (!node) {\n        throw new Error('`' + optionName + '` did not return a node');\n      }\n    }\n    return node;\n  }\n\n  function firstFocusNode() {\n    var node;\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (container.contains(document.activeElement)) {\n      node = document.activeElement;\n    } else {\n      node = tabbableNodes[0] || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error('You can\\'t have a focus-trap without at least one focusable element');\n    }\n\n    return node;\n  }\n\n  // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event\n  function checkPointerDown(e) {\n    if (config.clickOutsideDeactivates && !container.contains(e.target)) {\n      deactivate({ returnFocus: false });\n    }\n  }\n\n  function checkClick(e) {\n    if (config.clickOutsideDeactivates) return;\n    if (container.contains(e.target)) return;\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }\n\n  function checkFocus(e) {\n    if (container.contains(e.target)) return;\n    e.preventDefault();\n    e.stopImmediatePropagation();\n    // Checking for a blur method here resolves a Firefox issue (#15)\n    if (typeof e.target.blur === 'function') e.target.blur();\n\n    if (tabEvent) {\n      readjustFocus(tabEvent);\n    }\n  }\n\n  function checkKey(e) {\n    if (e.key === 'Tab' || e.keyCode === 9) {\n      handleTab(e);\n    }\n\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      deactivate();\n    }\n  }\n\n  function handleTab(e) {\n    updateTabbableNodes();\n\n    if (e.target.hasAttribute('tabindex') && Number(e.target.getAttribute('tabindex')) < 0) {\n      return tabEvent = e;\n    }\n\n    e.preventDefault();\n    var currentFocusIndex = tabbableNodes.indexOf(e.target);\n\n    if (e.shiftKey) {\n      if (e.target === firstTabbableNode || tabbableNodes.indexOf(e.target) === -1) {\n        return tryFocus(lastTabbableNode);\n      }\n      return tryFocus(tabbableNodes[currentFocusIndex - 1]);\n    }\n\n    if (e.target === lastTabbableNode) return tryFocus(firstTabbableNode);\n\n    tryFocus(tabbableNodes[currentFocusIndex + 1]);\n  }\n\n  function updateTabbableNodes() {\n    tabbableNodes = tabbable(container);\n    firstTabbableNode = tabbableNodes[0];\n    lastTabbableNode = tabbableNodes[tabbableNodes.length - 1];\n  }\n\n  function readjustFocus(e) {\n    if (e.shiftKey) return tryFocus(lastTabbableNode);\n\n    tryFocus(firstTabbableNode);\n  }\n}\n\nfunction isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n}\n\nfunction tryFocus(node) {\n  if (!node || !node.focus) return;\n  if (node === document.activeElement)  return;\n\n  node.focus();\n  if (node.tagName.toLowerCase() === 'input') {\n    node.select();\n  }\n}\n\nvar focusTrap_1$1 = focusTrap;\n\nconst activeModals = [];\n\nconst makeModalStackable = modal => {\n  modal.on(\"opening\", () => {\n    activeModals.forEach(modal => modal.background());\n    modal.foreground();\n    activeModals.push(modal);\n    const deactivate = () => {\n      hiddenListener.cancel();\n      destroyListener.cancel();\n      activeModals.pop();\n      const nextModal = activeModals[activeModals.length - 1];\n      // without setTimeout, the esc key event that dismisses a modal will also dismiss the next one\n      nextModal && setTimeout(() => nextModal.foreground());\n    };\n    const hiddenListener = modal.on(\"hiding\", deactivate);\n    const destroyListener = modal.on(\"destroy\", deactivate);\n  });\n};\n\n/* src/Modal.html generated by Svelte v2.13.2 */\n// TODO: write a smaller, less \"featured\" focusTrap. It really just needs to trap focus\nconst makeFocusTrap = ({ rootElement }) => {\n  return focusTrap_1$1(rootElement, {\n    initialFocus: rootElement,\n    fallbackFocus: rootElement,\n    escapeDeactivates: false,\n    returnFocusOnDeactivate: true,\n    clickOutsideDeactivates: false\n  });\n};\n\n/* TODO: maybe make a way to accept custom transitions */\n// which might conflict with this todo:\n/* TODO: be fancy and take a touch/click/element position to transition in from */\nconst STYLE = {\n  modal: { open: { opacity: 1 }, hidden: { opacity: 0 } },\n  content: { open: { scale: 1 }, hidden: { scale: 0.9 } }\n};\nconst DEFAULTS = {\n  initiallyHidden: false,\n  initialFocusElement: false,\n  center: true,\n  zIndexBase: 1,\n  pressScrimToDismiss: true,\n  escToDismiss: true,\n  trapFocus: true\n};\n\n[STYLE, DEFAULTS].forEach(Object.freeze);\n\nfunction transitioning({ hiding, opening }) {\n\treturn hiding || opening;\n}\n\nfunction open({ hidden, transitioning }) {\n\treturn !hidden && !transitioning;\n}\n\nfunction zIndex({ zIndexBase, inForeground }) {\n\treturn inForeground ? zIndexBase : zIndexBase - 1;\n}\n\nfunction data() {\n  return Object.assign(\n    {\n      hidden: true,\n      hiding: false,\n      opening: false,\n      inForeground: false, // to handle stacking of multiple modals open at once\n      modalStyle: STYLE.modal.hidden,\n      contentStyle: STYLE.content.hidden\n    },\n    DEFAULTS\n  );\n}\n\nvar methods = {\n  spring(key, end, options) {\n    options = options || { stiffness: 0.5, damping: 1 };\n    return spring.call(this, key, end, options);\n  },\n\n  focusInitialFocusElement() {\n    const initialFocusElement = this.get().initialFocusElement;\n    initialFocusElement && initialFocusElement.focus();\n  },\n\n  onKeyup(event) {\n    const shouldDismiss =\n      event.key.toLowerCase() === \"escape\" &&\n      this.get().escToDismiss &&\n      this.get().inForeground;\n    if (shouldDismiss) {\n      this.dismiss();\n    }\n  },\n\n  onScrimPress() {\n    if (this.get(\"pressScrimToDismiss\")) {\n      this.dismiss();\n    }\n  },\n\n  open() {\n    if (this.get().open || this.get().opening) {\n      return;\n    }\n\n    this.set({ opening: true, hiding: false, hidden: false });\n    this.fire(\"opening\");\n\n    Promise.all([\n      this.spring(\"modalStyle\", STYLE.modal.open),\n      this.spring(\"contentStyle\", STYLE.content.open)\n    ]).then(() => {\n      this.set({ opening: false });\n      this.fire(\"opened\");\n    });\n\n    return this;\n  },\n\n  hide(reason, result) {\n    if (this.get().hidden || this.get().hiding) {\n      return;\n    }\n\n    this.set({ opening: false, hiding: true });\n\n    this.fire(\"result\", result);\n    this.fire(reason, result);\n    this.fire(\"hiding\");\n\n    Promise.all([\n      this.spring(\"modalStyle\", STYLE.modal.hidden),\n      this.spring(\"contentStyle\", STYLE.content.hidden)\n    ]).then(() => {\n      this.set({ hiding: false, hidden: true });\n      this.fire(\"hidden\");\n    });\n\n    return this;\n  },\n\n  close(result) {\n    return this.hide(\"closed\", result);\n  },\n\n  dismiss(result) {\n    return this.hide(\"dismissed\", result);\n  },\n\n  background() {\n    this.focusTrap.pause();\n    this.set({ inForeground: false });\n  },\n\n  foreground(modal) {\n    this.focusTrap.unpause();\n    this.focusInitialFocusElement();\n    this.set({ inForeground: true });\n  }\n};\n\nfunction oncreate() {\n  this.on(\"open\", () => this.open());\n  this.on(\"dismiss\", e => this.dismiss(e));\n  this.on(\"close\", e => this.close(e));\n\n  const rootElement = this.refs.modal;\n\n  this.focusTrap = makeFocusTrap({ rootElement });\n  this.on(\"hiding\", () => this.focusTrap.deactivate());\n  this.on(\"destroy\", () => this.focusTrap.deactivate());\n\n  makeModalStackable(this);\n\n  this.on(\"opening\", () => {\n    if (this.get().trapFocus) {\n      this.focusTrap.activate();\n    }\n    setTimeout(() => {\n      /* focusTrap seems unable to focus the element\n       putting activate() in the setTimeout does not help\n       Focusing it manually works just fine,\n       and we need to manually focus anyway when trapFocus is false\n       also, I don't think focusTrap needs to concern itself with focusing elements\n    */\n      this.focusInitialFocusElement();\n    });\n  });\n  console.log(\"looking for initiallyHidden\", this);\n  if (!this.get().initiallyHidden) {\n    this.open();\n  }\n}\n\nfunction setup(Modal) {\n  Object.assign(Modal, { DEFAULTS });\n}\n\nfunction add_css() {\n\tvar style = createElement(\"style\");\n\tstyle.id = 'svelte-1b0dvdd-style';\n\tstyle.textContent = \".svelte-modal.svelte-1b0dvdd{position:fixed;top:0;left:0;right:0;height:100%;display:flex;align-items:flex-start;justify-content:center}.svelte-modal-scrim.svelte-1b0dvdd{background:rgba(0, 0, 0, 0.5);position:fixed;top:0;bottom:0;right:0;left:0}[data-center=\\\"true\\\"].svelte-1b0dvdd{align-items:center}[data-hidden=\\\"true\\\"].svelte-1b0dvdd{visibility:hidden}.content.svelte-1b0dvdd{max-width:100vw;max-height:100vh;overflow:visible;z-index:1}\";\n\tappend(document.head, style);\n}\n\nfunction create_main_fragment(component, ctx) {\n\tvar div, div_1, slot_content_default = component._slotted.default, text_1, div_2;\n\n\tfunction onwindowkeyup(event) {\n\t\tcomponent.onKeyup(event);\n\t}\n\twindow.addEventListener(\"keyup\", onwindowkeyup);\n\n\tfunction click_handler(event) {\n\t\tcomponent.onScrimPress();\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = createElement(\"div\");\n\t\t\tdiv_1 = createElement(\"div\");\n\t\t\ttext_1 = createText(\"\\n  \");\n\t\t\tdiv_2 = createElement(\"div\");\n\t\t\tdiv_1.className = \"content svelte-1b0dvdd\";\n\t\t\tsetStyle(div_1, \"transform\", \"scale(\" + ctx.contentStyle.scale + \")\");\n\t\t\taddListener(div_2, \"click\", click_handler);\n\t\t\tdiv_2.className = \"svelte-modal-scrim svelte-1b0dvdd\";\n\t\t\tsetStyle(div_2, \"z-index\", (ctx.zIndex - 1));\n\t\t\tdiv.className = \"svelte-modal svelte-1b0dvdd\";\n\t\t\tdiv.tabIndex = \"-1\";\n\t\t\tdiv.dataset.center = ctx.center;\n\t\t\tdiv.dataset.hidden = ctx.hidden;\n\t\t\tsetStyle(div, \"z-index\", ctx.zIndex);\n\t\t\tsetStyle(div, \"opacity\", ctx.modalStyle.opacity);\n\t\t},\n\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tappend(div, div_1);\n\n\t\t\tif (slot_content_default) {\n\t\t\t\tappend(div_1, slot_content_default);\n\t\t\t}\n\n\t\t\tcomponent.refs.content = div_1;\n\t\t\tappend(div, text_1);\n\t\t\tappend(div, div_2);\n\t\t\tcomponent.refs.scrim = div_2;\n\t\t\tcomponent.refs.modal = div;\n\t\t},\n\n\t\tp(changed, ctx) {\n\t\t\tif (changed.contentStyle) {\n\t\t\t\tsetStyle(div_1, \"transform\", \"scale(\" + ctx.contentStyle.scale + \")\");\n\t\t\t}\n\n\t\t\tif (changed.zIndex) {\n\t\t\t\tsetStyle(div_2, \"z-index\", (ctx.zIndex - 1));\n\t\t\t}\n\n\t\t\tif (changed.center) {\n\t\t\t\tdiv.dataset.center = ctx.center;\n\t\t\t}\n\n\t\t\tif (changed.hidden) {\n\t\t\t\tdiv.dataset.hidden = ctx.hidden;\n\t\t\t}\n\n\t\t\tif (changed.zIndex) {\n\t\t\t\tsetStyle(div, \"z-index\", ctx.zIndex);\n\t\t\t}\n\n\t\t\tif (changed.modalStyle) {\n\t\t\t\tsetStyle(div, \"opacity\", ctx.modalStyle.opacity);\n\t\t\t}\n\t\t},\n\n\t\td(detach) {\n\t\t\twindow.removeEventListener(\"keyup\", onwindowkeyup);\n\n\t\t\tif (detach) {\n\t\t\t\tdetachNode(div);\n\t\t\t}\n\n\t\t\tif (slot_content_default) {\n\t\t\t\treinsertChildren(div_1, slot_content_default);\n\t\t\t}\n\n\t\t\tif (component.refs.content === div_1) component.refs.content = null;\n\t\t\tremoveListener(div_2, \"click\", click_handler);\n\t\t\tif (component.refs.scrim === div_2) component.refs.scrim = null;\n\t\t\tif (component.refs.modal === div) component.refs.modal = null;\n\t\t}\n\t};\n}\n\nfunction Modal(options) {\n\tinit(this, options);\n\tthis.refs = {};\n\tthis._state = assign(data(), options.data);\n\tthis._recompute({ hiding: 1, opening: 1, hidden: 1, transitioning: 1, zIndexBase: 1, inForeground: 1 }, this._state);\n\tthis._intro = true;\n\n\tthis._slotted = options.slots || {};\n\n\tif (!document.getElementById(\"svelte-1b0dvdd-style\")) add_css();\n\n\tthis._fragment = create_main_fragment(this, this._state);\n\n\tthis.root._oncreate.push(() => {\n\t\toncreate.call(this);\n\t\tthis.fire(\"update\", { changed: assignTrue({}, this._state), current: this._state });\n\t});\n\n\tif (options.target) {\n\t\tthis._fragment.c();\n\t\tthis._mount(options.target, options.anchor);\n\n\t\tflush(this);\n\t}\n}\n\nassign(Modal.prototype, proto);\nassign(Modal.prototype, methods);\n\nModal.prototype._recompute = function _recompute(changed, state) {\n\tif (changed.hiding || changed.opening) {\n\t\tif (this._differs(state.transitioning, (state.transitioning = transitioning(state)))) changed.transitioning = true;\n\t}\n\n\tif (changed.hidden || changed.transitioning) {\n\t\tif (this._differs(state.open, (state.open = open(state)))) changed.open = true;\n\t}\n\n\tif (changed.zIndexBase || changed.inForeground) {\n\t\tif (this._differs(state.zIndex, (state.zIndex = zIndex(state)))) changed.zIndex = true;\n\t}\n};\n\nsetup(Modal);\n\nexport default Modal;\n","<div class=\"content\">\n  <p>Here is some modal content.</p>\n  <p>It is interesting... or whatever.</p>\n  <button ref:dismiss on:click=\"closeModal('dismiss', 'It got dismissed.')\">\n    Dismiss Modal\n  </button>\n  <button ref:close on:click=\"closeModal('close', `It's come to a close.`)\">\n    Close Modal\n  </button>\n</div>\n\n<style>\n  .content {\n    background: white;\n    padding: 30px;\n    border-radius: 4px;\n    margin: 10px;\n    max-height: calc(100vh - 20px);\n    overflow-y: auto;\n  }\n</style>\n\n<script>\n  export default {\n    oncreate() {\n      this.set({ initialFocusElement: this.refs.close });\n    },\n\n    methods: {\n      closeModal(method, message) {\n        this.fire(`modal.${method}`, message);\n      }\n    }\n  };\n</script>\n","<h1>svelte-modal</h1>\n\n<label>\n  Center modal\n  <input type=\"checkbox\" bind:checked=\"center\" />\n</label>\n\n<label>\n  Trap focus\n  <input type=\"checkbox\" bind:checked=\"trapFocus\" />\n</label>\n\n<button on:click=\"set({ shouldShowModal: true, modalResult: '' })\">\n  Open Modal\n</button>\n\n<p>\n  <strong>Modal result:</strong>\n  {modalResult || ''}\n</p>\n\n{#if shouldShowModal}\n  <Modal\n    ref:modal\n    bind:opening\n    bind:hiding\n    {initialFocusElement}\n    {center}\n    {trapFocus}\n    on:result=\"set({ modalResult: event })\"\n    on:hidden=\"set({ shouldShowModal: false })\">\n    <ModalContent\n      ref:modalContent\n      bind:initialFocusElement\n      on:modal.dismiss=\"refs.modal.dismiss(event)\"\n      on:modal.close=\"refs.modal.close(event)\" />\n  </Modal>\n{/if}\n<p>\n  <strong>Modal state:</strong>\n  &#123; opening: {opening}\n  , hiding: {hiding}\n  , shouldShowModal: {shouldShowModal}\n  }\n</p>\n\n<script>\n  import Modal from \"../../\";\n  import ModalContent from \"./ModalContent.html\";\n\n  export default {\n    data() {\n      return {\n        shouldShowModal: false,\n        modalResult: \"None thus far.\",\n        showModalResult: false\n      };\n    },\n\n    components: { Modal, ModalContent }\n  };\n</script>\n","import Demo from \"./Demo.html\";\n\nwindow.app = new Demo({ target: document.getElementById(\"app\") });\n"],"names":["noop","assign","tar","src","k","append","target","node","appendChild","insert","anchor","insertBefore","detachNode","parentNode","removeChild","createElement","name","document","createText","data","createTextNode","addListener","event","handler","addEventListener","removeListener","removeEventListener","setAttribute","attribute","value","setData","text","blankObject","Object","create","flush","component","_lock","callAll","_beforecreate","_oncreate","_aftercreate","init","options","_handlers","_slots","_bind","_staged","root","store","fns","length","shift","proto","destroy","detach","this","fire","set","_fragment","d","_state","get","eventName","handlers","slice","i","__calling","call","on","push","cancel","index","indexOf","splice","newState","_set","_recompute","oldState","changed","dirty","key","_differs","current","previous","p","_stage","_mount","a","b","setStyle","style","setProperty","isDate","obj","prototype","toString","scheduler$1","components","running","add","requestAnimationFrame","next","hasComponents","hasSprings","_springs","tick","_springCallbacks","_springing","number","velocity","stiffness","damping","valueThreshold","Math","abs","velocityThreshold","object","update","checkCompatibility","type","Array","isArray","Error","aKeys","keys","bKeys","keysMatch","getSpring","snap$1","subsprings","active","array","dummy","subspring","getTime","Date","date","tabbable","el","candidate","candidateIndexAttr","candidateIndex","elementDocument","ownerDocument","basicTabbables","orderedTabbables","isUnavailable","isOffCache","documentElement","computedStyle","defaultView","getComputedStyle","isOff","nodeComputedStyle","result","display","visibility","createIsUnavailable","candidateSelectors","candidates","querySelectorAll","join","includeContainer","matches","Element","msMatchesSelector","webkitMatchesSelector","some","candidateSelector","apply","unshift","l","parseInt","getAttribute","isNaN","tabIndex","tagName","disabled","tabbableNodes","sort","map","listeningFocusTrap","tryFocus","focus","activeElement","toLowerCase","select","focusTrap_1$1","element","userOptions","firstTabbableNode","lastTabbableNode","nodeFocusedBeforeActivation","paused","tabEvent","container","querySelector","config","returnFocusOnDeactivate","undefined","escapeDeactivates","trap","activate","activateOptions","defaultedActivateOptions","onActivate","addListeners","deactivate","pause","removeListeners","unpause","deactivateOptions","defaultedDeactivateOptions","returnFocus","onDeactivate","setTimeout","updateTabbableNodes","getNodeForOption","contains","firstFocusNode","checkFocus","checkClick","checkPointerDown","checkKey","optionName","optionValue","e","clickOutsideDeactivates","preventDefault","stopImmediatePropagation","blur","shiftKey","readjustFocus","keyCode","hasAttribute","Number","currentFocusIndex","handleTab","isEscapeEvent","activeModals","makeModalStackable","modal","forEach","background","foreground","hiddenListener","destroyListener","pop","nextModal","makeFocusTrap","rootElement","initialFocus","fallbackFocus","STYLE","open","opacity","hidden","content","scale","DEFAULTS","initiallyHidden","initialFocusElement","center","zIndexBase","pressScrimToDismiss","escToDismiss","trapFocus","freeze","methods","[object Object]","end","to","_this","set_1","key_1","spring_2","promise","Promise","fulfil","inForeground","dismiss","opening","hiding","all","spring","then","reason","hide","focusTrap","focusInitialFocusElement","create_main_fragment","ctx","div","div_1","text_1","div_2","slot_content_default","_slotted","default","onwindowkeyup","onKeyup","click_handler","onScrimPress","window","className","contentStyle","zIndex","dataset","modalStyle","refs","scrim","parent","firstChild","reinsertChildren","Modal","transitioning","_intro","slots","getElementById","id","textContent","head","close","console","log","assignTrue","c","state","setup","method","message","closeModal","createDocumentFragment","modalResult","shouldShowModal","showModalResult","app","Demo"],"mappings":"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"}